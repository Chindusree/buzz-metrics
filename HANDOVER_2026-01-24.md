# BUzz Metrics - Handover Document
**Date:** January 24, 2026
**Session:** SEI Development + Stage 1 Aggregates

---

## Project Overview

BUzz Metrics is an automated analytics dashboard for Bournemouth University's student newsroom. It scrapes articles from buzz.bournemouth.ac.uk, extracts quality metrics, and displays them on a GitHub Pages dashboard.

- **Live dashboard:** https://chindusree.github.io/buzz-metrics/
- **Repository:** https://github.com/Chindusree/buzz-metrics
- **Owner:** Chindu (Professor of Journalism & Innovation)

---

## Current Data State

| Date | Articles |
|------|----------|
| 2026-01-13 | 24 |
| 2026-01-14 | 21 |
| 2026-01-15 | 32 |
| 2026-01-16 | 31 |
| 2026-01-20 | 26 |
| 2026-01-21 | 25 |
| 2026-01-22 | 23 |
| 2026-01-23 | 33 |
| **Total** | **215** |

Newsdays end: January 30, 2026
Expected final total: ~350 articles

---

## Completed This Session

### 1. Historical Data Import
- Fixed `add_historical.py` bugs (time extraction, Shorthand detection)
- Imported Jan 13 (24 articles) and Jan 15 (32 articles)
- Tags: `v3.2-heatmap-category-fix`, `v3.3-historical-jan13-jan15`

### 2. Heatmap Bug Fix
- Issue: Jan 14 News articles not showing
- Cause: Frontend expected `display_category='General News'` but data had `'News'`
- Fix: Normalized categories in `docs/index.html`

### 3. Stage 1 Aggregates (In Progress with CC)
- ✅ "All Dates" option in date picker
- ✅ Stories: Category filter toggles (All/News/Sport)
- ✅ Stories: Incremental loading (10 default, +25 increments)
- ✅ Targets: Toggle for showing all dates (5 default)
- Pending: Contributors section for All Dates

### 4. SEI (Source Equity Index) - NEW
- Created prompt template: `scraper/sei_prompt_template.md`
- Tested on Abi Palmer story (charity plunge)
- Result: Score correctly dropped from 62 → 32 for single-source story

---

## SEI Overview

**Problem solved:** Single-source stories were scoring high (62) just because the one source was female. This rewards luck, not journalistic effort.

**Solution:** Source Equity Index measures behaviour, not demographics:
- **Volume Mitigator:** <2 sources = score halved
- **Ghost Stakeholders:** Who SHOULD have been contacted but wasn't
- **Structural vs Impact:** Who explains WHY vs describes WHAT

**Key files:**
- `scraper/sei_prompt_template.md` — Full prompt and calculation docs
- Committed locally, NOT pushed (still testing)

**Test command:**
```bash
curl -s "https://api.groq.com/openai/v1/chat/completions" \
  -H "Authorization: Bearer $GROQ_API_KEY" \
  -H "Content-Type: application/json" \
  -d @/tmp/sei_prompt_v2.json | python3 -m json.tool
```

---

## Key Files

| File | Purpose |
|------|---------|
| `docs/index.html` | Dashboard frontend (all UI) |
| `data/metrics_verified.json` | Backend data |
| `docs/metrics_verified.json` | Frontend data (copied from data/) |
| `scraper/scrape.py` | Main scraper with Groq analysis |
| `scraper/add_historical.py` | Import historical articles |
| `scraper/sei_prompt_template.md` | SEI methodology (WIP) |
| `SPRINT_PLAN.md` | Feature roadmap |

---

## Git Workflow (IMPORTANT)

GitHub Actions runs every 15 minutes, causing merge conflicts. Always use:
```bash
git pull origin main --no-rebase
# make changes
git add -A
git commit -m "message"
git pull origin main --no-rebase && git push origin main
```

---

## Pending Tasks

### Stage 1 (Priority)
- [ ] Contributors: Show all 60+ cards for "All Dates"
- [ ] Stories: TIME → DATE column when "All Dates" selected
- [ ] Styling tweaks: "▼ more" toggle (smaller, blacker, closer to card)

### Stage 2 (Later)
- [ ] Gender breakdown in Analysis section cards
- [ ] Originals vs Secondary card (All Dates only)
- [ ] SEI integration into scraper
- [ ] Backfill 215 articles with SEI scores

### SEI Next Steps
- [ ] Test on 5-10 diverse articles (news, sport, features)
- [ ] Validate formula against editorial judgment
- [ ] Decide integration approach (scrape.py vs separate script)
- [ ] Push to main when stable

---

## Important Context

- **Design philosophy:** "What would Jony Ive do?" — clean, minimal, purposeful
- **Academic constraint:** Open-source models only (Llama via Groq)
- **Pedagogical intent:** Guidance not grading — help students understand quality journalism
- **Key insight:** Measure "clay" (raw material) not polish

---

## CC (Claude Code) Usage

Chindu works with Claude Code for implementation. Briefs should be:
- Specific about what to change
- Include file paths
- State what NOT to change
- Request confirmation before proceeding

---

## Contacts

- Project Owner: Chindu (Bournemouth University)
- Development: Claude (conversation) + Claude Code (implementation)

---

*Handover complete. Next Claude: read this + SPRINT_PLAN.md + sei_prompt_template.md*
